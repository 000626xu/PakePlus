import{r as e,u as r,g as s,j as a,B as i,m as d}from"./index-aeca932e.js";import{D as n}from"./index-d88d2b2a.js";import"./index-57f63cdf.js";import{t as l}from"./teacher-e39ee8aa.js";import{u as c}from"./useSetState-8e08c7f5.js";import"./CalendarOutlined-8ff6678f.js";const o=e=>0===e?"":6===e?"冻结":"缺勤",h=e=>5===e?"#fff":"#000",x=()=>{document.title="教练日程";const[x,u]=e.useState([]),g=r();let[p,m]=s();const j=p.get("teacher"),[y,f]=e.useState(null);e.useState([]);const[w,k]=e.useState(!1),v=e=>`星期${["","一","二","三","四","五","六","日"][e]}`,S=new Date,b=S.getFullYear(),F=S.getMonth()+1,C=S.getDate(),[T,A]=c({time:b+"-"+(F<10?"0"+F:F)+"-"+(C<10?"0"+C:C),coachuuid:j});return e.useEffect((()=>{(async e=>{const r={time:e.time,coachuuid:e.coachuuid};k(!0);try{const e=await l.getTeacherWork(r);e&&200===e.code?u(e.data):d.error((null==e?void 0:e.message)??t("dataFetchFailed"))}finally{k(!1)}})(T)}),[T]),a.jsx(a.Fragment,{children:a.jsxs("div",{children:[a.jsx(n,{onChange:(e,t)=>{f(e)},style:{width:"300px"}}),a.jsxs("span",{style:{float:"right"},children:[a.jsx(i,{type:"primary",onClick:()=>{if(y){(async()=>{const e={time:y,coachuuid:T.coachuuid};k(!0);try{const r=await l.getTeacherWork(e);r&&200===r.code?u(r.data):d.error((null==r?void 0:r.message)??t("dataFetchFailed"))}finally{k(!1)}})()}},style:{marginRight:"10px"},children:"查找"}),a.jsx(i,{type:"primary",ghost:!0,onClick:()=>g(-1),children:"返回"})]}),a.jsx("div",{style:{marginTop:"20px"},children:a.jsxs("table",{children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{style:{width:"60px"}}),x.map(((e,t)=>a.jsxs("th",{style:{width:"200px"},children:[a.jsx("div",{children:v(e.week)}),a.jsx("div",{children:e.time})]},t)))]})}),a.jsx("tbody",{children:Array.from({length:24},((e,t)=>a.jsxs("tr",{children:[a.jsx("td",{style:{width:"60px",height:"60px"},children:a.jsx("div",{style:{marginTop:"-30px",textAlign:"right",paddingRight:"8px"},children:` ${t.toString().padStart(2,"0")}:00`})}),x.map(((e,r)=>{var s,i,d;return a.jsx("td",{style:{backgroundColor:(d=null==(s=e.weekarr[t])?void 0:s.status,0===d?"rgb(99,183,243)":5===d?"rgb(7,193, 96)":"rgb(240,242,245)"),textAlign:"center",border:"1px solid #fff",padding:"20px 0",color:h(null==(i=e.weekarr[t])?void 0:i.status)},children:e.weekarr[t].schedule?e.weekarr[t].schedule:o(e.weekarr[t].status)},r)}))]},t)))})]})})]})})};export{x as default};
