import{b as e,u as a,r as s,j as t,S as i,n as l,B as r,h as m,m as o}from"./index-aeca932e.js";import{C as n}from"./index-e693154d.js";import{C as d}from"./index-d93151a5.js";import{F as c}from"./index-85dc0d3a.js";import{I as u}from"./index-d90fa46f.js";import{I as p}from"./index-a1eba122.js";import{T as j}from"./index-376edbd3.js";import"./index-d88d2b2a.js";import"./index-57f63cdf.js";import{u as x}from"./user-a3dc1d16.js";import{s as h}from"./store-77f5b287.js";import{u as b}from"./useLocation-b24889d5.js";import{C as f}from"./CloseOutlined-4f0ea934.js";import"./index-4a60c0a0.js";import"./responsiveObserve-cfbf1a72.js";import"./index-73995e0d.js";import"./EyeOutlined-f0ed5c3d.js";import"./CalendarOutlined-8ff6678f.js";function v(){const{t:v}=e(),C=b(),y=a(),{model:g}=C.state;document.title="HADO CRM";const[w]=c.useForm(),[H,I]=s.useState([]),[P,k]=s.useState([]),S=[{label:"周一",value:"mon"},{label:"周二",value:"tue"},{label:"周三",value:"wed"},{label:"周四",value:"thu"},{label:"周五",value:"fri"},{label:"周六",value:"sat"},{label:"周日",value:"sun"}],N=()=>{};s.useEffect((()=>{(async()=>{const e=(await x.getAgents()).data.map((e=>({label:e.providername,value:e.uuid})));I(e)})()}),[]);return t.jsx("div",{className:"field-edit-box",children:t.jsxs(c,{labelCol:{span:4},wrapperCol:{span:16},form:w,name:"control-hooks",onFinish:e=>{},style:{maxWidth:700},children:[t.jsx(c.Item,{name:"proxy",label:v("distributor"),rules:[{required:!0}],children:t.jsx(i,{placeholder:v("pleaseSelect"),allowClear:!0,onChange:async e=>{const a=(await x.getStores({agenuuid:e})).data.map((e=>({label:e.providername,value:e.uuid})));k(a)},options:H})}),t.jsx(c.Item,{name:"store",label:v("storeName"),rules:[{required:!0}],children:t.jsx(i,{placeholder:v("pleaseSelect"),onChange:e=>{},options:P,allowClear:!0})}),t.jsx(c.Item,{name:"storePlace",label:v("courtName"),rules:[{required:!0,max:12}],children:t.jsx(u,{})}),t.jsx(c.Item,{name:"time",label:v("businessHours"),children:t.jsx(j.RangePicker,{format:"HH:mm",placeholder:[v("startDate"),v("endDate")]})}),t.jsx(c.Item,{name:"limit",label:v("quantityLimit"),children:t.jsx(p,{min:0,max:99})}),t.jsx(c.List,{name:"items",children:(e=[],{add:a,remove:s})=>t.jsx("div",{style:{display:"flex",rowGap:16,flexDirection:"column",justifyContent:"center"},children:e.map(((e,a)=>t.jsxs(n,{size:"small",title:`价格规则${e.name+1}`,extra:t.jsx(f,{onClick:()=>{s(e.name)}}),children:[t.jsx(c.Item,{label:"整场价格",name:[e.name,"allPrice"],children:t.jsx(u,{})}),t.jsx(c.Item,{label:"散客价格",name:[e.name,"customPrice"],children:t.jsx(u,{})}),t.jsx(c.Item,{label:"价格时间",name:[e.name,"priceTime"],children:t.jsx(j.RangePicker,{format:"HH:mm"})}),t.jsx("div",{className:"week",children:t.jsx(d.Group,{options:S,onChange:N})})]},e.key)))})},"addPrice"),t.jsxs(l,{className:"bottom-btn",children:[t.jsx(r,{type:"primary",className:"submit",onClick:async()=>{try{const e=await w.validateFields(),a={provideruuid:e.store,stationname:e.storePlace,start_time:e.time?m(e.time[0]).format("HH:mm"):"",end_time:e.time?m(e.time[1]).format("HH:mm"):"",maxpeople:e.limit},s=await h.savePlay(a);s&&200===s.code?(o.success("创建成功"),y("/store/field")):o.error((null==s?void 0:s.message)??"操作失败")}catch(e){}},children:v("submit")}),t.jsx(r,{htmlType:"button",onClick:()=>{y(-1)},children:v("return")})]})]})})}export{v as default};
