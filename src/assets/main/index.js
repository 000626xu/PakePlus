System.register("chunks:///_virtual/AudioTs.ts",["cc"],(function(o){var i,u,r,e,n,t,c;return{setters:[function(o){i=o.cclegacy,u=o._decorator,r=o.resources,e=o.AudioClip,n=o.Node,t=o.director,c=o.AudioSource}],execute:function(){var s,d;i._RF.push({},"3b0a8OguWJCvrHdEXa1fYp+","AudioTs",void 0);var a=u.ccclass;o("AudioTs",a("AudioTs")(((d=function(){function o(){this.audioSource=null;var o=new n;o.name="__audioMgr__",t.getScene().addChild(o),t.addPersistRootNode(o),this.audioSource=o.addComponent(c)}o.inst=function(){return null==this._inst&&(this._inst=new o),this._inst};var i=o.prototype;return i.playAudio=function(o,i){var u=this;void 0===i&&(i=1);var n="audio/sound/"+o;r.load(n,e,(function(o,r){o?console.error(o):u.audioSource.playOneShot(r,i)}))},i.playMusic=function(o){var i=this,u="audio/music/"+o;console.log("播放背景音乐",u),r.load(u,e,(function(o,u){o?console.error("music err",o):(i.audioSource.clip=u,i.audioSource.loop=!0,i.audioSource.play(),i.audioSource.volume=1)}))},o}())._inst=void 0,s=d))||s);i._RF.pop()}}}));

System.register("chunks:///_virtual/Car.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RoadTs.ts","./EventListener.ts","./Consts.ts","./AudioTs.ts"],(function(t){var i,s,e,o,n,h,r,p,a,l,c,d;return{setters:[function(t){i=t.inheritsLoose},function(t){s=t.cclegacy,e=t._decorator,o=t.Vec3,n=t.Collider,h=t.ParticleSystemComponent,r=t.Component},function(t){p=t.RoadTs,a=t.ROAD_MOVE},function(t){l=t.EventListener},function(t){c=t.EventName},function(t){d=t.AudioTs}],execute:function(){var u;s._RF.push({},"0cf97ieIglJEbjwqIfM8oDj","Car",void 0);var f=e.ccclass;e.property,t("Car",f("Car")(u=function(t){function s(){for(var i,s=arguments.length,e=new Array(s),n=0;n<s;n++)e[n]=arguments[n];return(i=t.call.apply(t,[this].concat(e))||this).currPoint=null,i.pointA=new o,i.pointB=new o,i.isRun=!1,i.speed=.2,i.offset=new o,i.tempVec=new o,i.wStartRotate=0,i.wEndPointRotate=0,i.wCenterPoint=new o,i.wRadius=0,i.maxSpeed=.1,i.acceleration=.1,i.particle=null,i.isMainCar=!1,i.audioTs=null,i.isProp=!1,i.isSlow=!1,i}i(s,t);var e=s.prototype;return e.setEntry=function(t,i){void 0===i&&(i=!1),console.log("car setEntry",t),this.isMainCar=i,this.node.setWorldPosition(t.worldPosition),this.currPoint=t.getComponent(p),this.pointA.set(t.worldPosition),this.pointB.set(this.currPoint.nextPoint.worldPosition);var s=this.pointB.z-this.pointA.z,e=this.pointB.x-this.pointA.x;this.node.eulerAngles=0!==s?s<0?new o:new o(0,180,0):new o(0,e>0?270:90,0)},e.startRun=function(){console.log("startRun"),this.isRun=!0,this.speed=0,this.acceleration=.2,this.maxSpeed=.1},e.stopRun=function(){this.acceleration=-.2,l.dispatch(c.STARTSHA,this.node)},e.start=function(){this.audioTs=d.inst(),this.node.getComponent(n).on("onTriggerEnter",this.onCollisionEnter,this)},e.onCollisionEnter=function(t){console.log("onCollisionEnter"),"bottle"===t.otherCollider.node.name?(console.log("吃到加速道具，开始加速"),this.audioTs.playAudio("speedup2"),t.otherCollider.node.destroy(),this.isProp=!0,this.maxSpeed=.3,this.particle=this.node.getChildByName("gas"),this.particle.getComponent(h).play()):(console.log("碰到了泥潭，开始减速"),this.isSlow=!0,this.acceleration=-.1,this.audioTs.playAudio("stop"),this.particle=this.node.getChildByName("down"),this.particle.getComponent(h).play())},e.update=function(t){var i=this.node.worldPosition;if(this.offset.set(i),this.isRun&&this.currPoint){if(this.speed+=this.acceleration*t,this.isProp&&(console.log("加速道具开始加速",this.speed,this.maxSpeed),this.speed>=this.maxSpeed&&(console.log("加速到最高速度了,开始减速"),this.maxSpeed=.1,this.acceleration=-.2),this.speed<=this.maxSpeed&&this.acceleration<0&&(this.speed=this.maxSpeed,this.isProp=!1,this.acceleration=.2,console.log("加速到最高速度后减速到正常速度了，停用道具"),this.particle.getComponent(h).stop())),this.isSlow&&(console.log("减速道具开始减速",this.speed,this.maxSpeed),this.speed<1e-4&&(console.log("小车减速道具到0了，开始恢复速度"),this.acceleration=.1,this.isSlow=!1,this.speed=.002,this.particle.getComponent(h).stop())),this.isProp||this.isSlow||(this.speed>this.maxSpeed&&(this.speed=this.maxSpeed),this.speed<.001&&(console.log("如果速度小于0.001，说明小车已经停止了"),this.isRun=!1,l.dispatch(c.ENDSHA))),this.currPoint.moveType===a.CURVE){var s=this.wEndPointRotate-this.wStartRotate,e=this.conversion(this.node.eulerAngles.y),n=e-this.wStartRotate+this.speed*this.wRadius*(this.wEndPointRotate>this.wStartRotate?1:-1),r=0;Math.abs(this.wEndPointRotate-e)<=3?(n=s,r=this.wEndPointRotate):r=Math.trunc(this.wStartRotate+n),this.tempVec.set(0,r,0),this.node.eulerAngles=this.tempVec,o.rotateY(this.offset,this.pointA,this.wCenterPoint,n*Math.PI/180)}else{var p=this.pointB.z-this.pointA.z;if(0!==p)p>0?(this.node.eulerAngles=new o(0,180,0),this.offset.z+=this.speed,this.offset.z>this.pointB.z&&(this.offset.z=this.pointB.z)):(this.node.eulerAngles=new o(0,0,0),this.offset.z-=this.speed,this.offset.z<this.pointB.z&&(this.offset.z=this.pointB.z));else this.pointB.x-this.pointA.x>0?(this.node.eulerAngles=new o(0,270,0),this.offset.x+=this.speed,this.offset.x>this.pointB.x&&(this.offset.x=this.pointB.x)):(this.node.eulerAngles=new o(0,90,0),this.offset.x-=this.speed,this.offset.x<this.pointB.x&&(this.offset.x=this.pointB.x))}this.node.setWorldPosition(this.offset),o.subtract(this.tempVec,this.pointB,this.offset),this.tempVec.length()<=.14&&this.arrival()}},e.arrival=function(){if(this.pointA.set(this.pointB),this.currPoint.nextPoint)if(this.currPoint=this.currPoint.nextPoint.getComponent(p),this.pointB.set(this.currPoint.nextPoint.worldPosition),this.currPoint.moveType===a.CURVE){console.log("arrival---","弯下一站弯道"),this.currPoint.clockwise?(this.wStartRotate=this.conversion(this.node.eulerAngles.y),this.wEndPointRotate=this.wStartRotate-90,this.pointB.z<this.pointA.z&&this.pointB.x>this.pointA.x||this.pointB.z>this.pointA.z&&this.pointB.x<this.pointA.x?this.wCenterPoint.set(this.pointB.x,0,this.pointA.z):this.wCenterPoint.set(this.pointA.x,0,this.pointB.z)):(this.wStartRotate=this.conversion(this.node.eulerAngles.y),this.wEndPointRotate=this.wStartRotate+90,this.pointB.z>this.pointA.z&&this.pointB.x>this.pointA.x||this.pointB.z<this.pointA.z&&this.pointB.x<this.pointA.x?this.wCenterPoint.set(this.pointB.x,0,this.pointA.z):this.wCenterPoint.set(this.pointA.x,0,this.pointB.z)),o.subtract(this.tempVec,this.pointA,this.wCenterPoint);var t=this.tempVec.length();this.wRadius=360/(2*Math.PI*t)}else console.log("下一站直线运动");else console.log("到达终点了"),this.isRun=!1},e.conversion=function(t){var i=t;return i<=0&&(i=360+i),i},s}(r))||u);s._RF.pop()}}}));

System.register("chunks:///_virtual/CarTs.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Car.ts"],(function(t){var r,n,e,a,i,o,s,c;return{setters:[function(t){r=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){i=t.cclegacy,o=t._decorator,s=t.Component},function(t){c=t.Car}],execute:function(){var u,l,p,f,C;i._RF.push({},"4191eFTtWxLSqtPsxru8tux","CarTs",void 0);var h=o.ccclass,y=o.property;t("CarTs",(u=h("CarTs"),l=y({type:c}),u((C=r((f=function(t){function r(){for(var r,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i))||this,e(r,"mainCar",C,a(r)),r}n(r,t);var i=r.prototype;return i.resetCar=function(t){console.log("carts reset car",t),t.length<=0?console.warn("there is no points in this map"):this.createCar(t[0])},i.createCar=function(t){this.mainCar.setEntry(t,!0)},i.canMove=function(t){void 0===t&&(t=!0),t?this.mainCar.startRun():this.mainCar.stopRun()},i.start=function(){},i.update=function(t){},r}(s)).prototype,"mainCar",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/Consts.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,o,e,r;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,r=t.Component}],execute:function(){var s;o._RF.push({},"38192q/nLBG/JxpjuWnywe/","Consts",void 0);var u=e.ccclass;e.property,t("EventName",function(t){return t.STARTSHA="STARTSHA",t.ENDSHA="ENDSHA",t.SHOWICON="SHOWICON",t.HIDEICON="HIDEICON",t}({})),t("Consts",u("Consts")(s=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var e=o.prototype;return e.start=function(){},e.update=function(t){},o}(r))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/effectTs.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventListener.ts","./Consts.ts"],(function(t){var e,n,o,i,r,s,c,l,a,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,c=t.Node,l=t.ParticleSystemComponent,a=t.Component},function(t){u=t.EventListener},function(t){h=t.EventName}],execute:function(){var f,p,d,g,v,N,y;r._RF.push({},"8c40aCQsjRORIRMl1qHR8Xv","effectTs",void 0);var S=s.ccclass,m=s.property;t("effectTs",(f=S("effectTs"),p=m(c),d=m(c),f((N=e((v=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(e,"shaNode",N,i(e)),o(e,"iconNode",y,i(e)),e.followNode=null,e.currentSha=null,e}n(e,t);var r=e.prototype;return r.start=function(){u.on(h.STARTSHA,this.startSha,this),u.on(h.ENDSHA,this.endSha,this),u.on(h.SHOWICON,this.showIcon,this),u.on(h.HIDEICON,this.hideIcon,this)},r.startSha=function(){console.log("开始刹车")},r.endSha=function(){console.log("结束刹车")},r.showIcon=function(){console.log("显示金币并播放动画");var t=arguments.length<=0?void 0:arguments[0];this.iconNode.setWorldPosition(t),this.iconNode.getComponent(l).play()},r.hideIcon=function(){console.log("隐藏金币并停止动画"),this.iconNode.getComponent(l).stop()},r.update=function(t){},e}(a)).prototype,"shaNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(v.prototype,"iconNode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=v))||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/EventListener.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,r,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,r=t._decorator,i=t.Component}],execute:function(){var a,o;e._RF.push({},"a3366jjq0tF7p7uyWbxo55L","EventListener",void 0);var s=r.ccclass;r.property,t("EventListener",s("EventListener")(((o=function(t){function e(){return t.apply(this,arguments)||this}n(e,t),e.on=function(t,n,e){this.handler[t]||(this.handler[t]=[]),this.handler[t].push({func:n,target:e})},e.off=function(t,n,e){if(this.handler[t])for(var r=this.handler[t],i=0;i<r.length;i++){var a=r[i];if(a.func===n&&a.target===e){r.splice(i,1);break}}},e.dispatch=function(t){if(this.handler[t]){for(var n=this.handler[t],e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];for(var a=0;a<n.length;a++){var o=n[a];o.func.apply(o.target,r)}}};var r=e.prototype;return r.start=function(){},r.update=function(t){},e}(i)).handler={},a=o))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/Game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MapTs.ts","./CarTs.ts","./AudioTs.ts"],(function(t){var a,e,n,r,i,o,u,s,c,l,p,h;return{setters:[function(t){a=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){i=t.cclegacy,o=t._decorator,u=t.Node,s=t.Input,c=t.Component},function(t){l=t.MapTs},function(t){p=t.CarTs},function(t){h=t.AudioTs}],execute:function(){var g,f,M,d,y,T,m,v,b;i._RF.push({},"e0c92HRtQlFN49SVpqRv+jJ","Game",void 0);var C=o.ccclass,_=o.property;t("Game",(g=C("Game"),f=_({type:l}),M=_({type:p}),d=_({type:u}),g((m=a((T=function(t){function a(){for(var a,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return a=t.call.apply(t,[this].concat(i))||this,n(a,"mapManager",m,r(a)),n(a,"carManager",v,r(a)),n(a,"uiManager",b,r(a)),a.audioTs=null,a}e(a,t);var i=a.prototype;return i.startGame=function(){console.log("start game"),this.uiManager.active=!1,this.carManager.canMove()},i.onLoad=function(){console.log("game on load"),this.mapManager.resetMap(),this.carManager.resetCar(this.mapManager.currentPath)},i.start=function(){this.node.on(s.EventType.TOUCH_START,this.touchStart,this),this.node.on(s.EventType.TOUCH_END,this.touchEnd,this),this.audioTs=h.inst(),this.audioTs.playAudio("start3"),this.audioTs.playMusic("run1")},i.touchStart=function(){this.carManager.canMove()},i.touchEnd=function(){this.carManager.canMove(!1)},i.update=function(t){},a}(c)).prototype,"mapManager",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=a(T.prototype,"carManager",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=a(T.prototype,"uiManager",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=T))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/GameMap.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,n,a,i,o,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){i=t.cclegacy,o=t._decorator,c=t.Node,p=t.Component}],execute:function(){var u,s,l,f,y;i._RF.push({},"c502eSh3uBK/pOSjVP3MHkC","GameMap",void 0);var h=o.ccclass,d=o.property;t("GameMap",(u=h("GameMap"),s=d({type:[c]}),u((y=e((f=function(t){function e(){for(var e,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,n(e,"startPoint",y,a(e)),e}r(e,t);var i=e.prototype;return i.start=function(){},i.update=function(t){},e}(p)).prototype,"startPoint",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=f))||l));i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AudioTs.ts","./Car.ts","./CarTs.ts","./EventListener.ts","./Game.ts","./GameMap.ts","./MapTs.ts","./RoadTs.ts","./Consts.ts","./Poolts.ts","./effectTs.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MapTs.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameMap.ts"],(function(t){var n,e,r,o,a;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,r=t._decorator,o=t.Component},function(t){a=t.GameMap}],execute:function(){var c;e._RF.push({},"f4ed4XwqMFJG4EKwhrCOaOM","MapTs",void 0);var s=r.ccclass;r.property,t("MapTs",s("MapTs")(c=function(t){function e(){for(var n,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(n=t.call.apply(t,[this].concat(r))||this).currentPath=[],n}n(e,t);var r=e.prototype;return r.resetMap=function(){console.log("MapTs resetMap");var t=this.node.children[0].getComponent(a);this.currentPath=t.startPoint,console.log("MapTs currentPath",this.currentPath)},r.start=function(){},r.update=function(t){},e}(o))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/Poolts.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,e,n,s,r;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,s=t.instantiate,r=t.Component}],execute:function(){var i,p;e._RF.push({},"48ed7TM+UJJbppVcBdyI2yS","Poolts",void 0);var u=n.ccclass;n.property,t("Poolts",u("Poolts")(((p=function(t){function e(){return t.apply(this,arguments)||this}o(e,t),e.getNode=function(t,o){var e=null,n=t.name;if(this.pool.has(n)){var r=this.pool.get(n);r.length>0&&(e=r.pop())}else e=s(t);return e.setParent(o),e},e.putNode=function(t){var o=t.name;this.pool.has(o)?this.pool.get(o).push(t):this.pool.set(o,[t])};var n=e.prototype;return n.start=function(){},n.update=function(t){},e}(r)).pool=new Map,i=p))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/RoadTs.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,r,n,o,a,l,u,c,p;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Enum,u=e.Node,c=e.Vec3,p=e.Component}],execute:function(){var s,d,f,b,y,E,v,R,T,h,P,m,A,g,w,N,z,I,O,D,L;o._RF.push({},"92f6cI2ZKpMUKzlojKHR2r1","RoadTs",void 0);var M=a.ccclass,_=a.property,B=e("ROAD_POINT",function(e){return e[e.NORMAL=0]="NORMAL",e[e.START=1]="START",e[e.END=2]="END",e[e.GREET=3]="GREET",e[e.BYE=4]="BYE",e[e.AI=5]="AI",e}({})),V=e("ROAD_MOVE",function(e){return e[e.LINE=0]="LINE",e[e.CURVE=1]="CURVE",e}({}));l(B),l(V);e("RoadTs",(s=M("RoadTs"),d=_({type:B,displayOrder:1}),f=_({type:u,displayOrder:2,visible:function(){return this.roadPoint!=B.END}}),b=_({type:V,displayOrder:3,visible:function(){return this.roadPoint!=B.END}}),y=_({type:Boolean,displayOrder:4,visible:function(){return this.moveType===V.CURVE&&this.roadPoint!=B.END}}),E=_({type:c,displayOrder:5,visible:function(){return this.roadPoint===B.GREET||this.roadPoint===B.BYE}}),v=_({visible:function(){return this.roadPoint===B.AI}}),R=_({visible:function(){return this.roadPoint===B.AI}}),T=_({visible:function(){return this.roadPoint===B.AI}}),h=_({visible:function(){return this.roadPoint===B.AI}}),s((A=i((m=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return i=e.call.apply(e,[this].concat(o))||this,r(i,"roadPoint",A,n(i)),r(i,"nextPoint",g,n(i)),r(i,"moveType",w,n(i)),r(i,"clockwise",N,n(i)),r(i,"direct",z,n(i)),r(i,"interval",I,n(i)),r(i,"delay",O,n(i)),r(i,"speed",D,n(i)),r(i,"aiType",L,n(i)),i}t(i,e);var o=i.prototype;return o.start=function(){},o.update=function(e){},i}(p)).prototype,"roadPoint",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.NORMAL}}),g=i(m.prototype,"nextPoint",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(m.prototype,"moveType",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return V.LINE}}),N=i(m.prototype,"clockwise",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=i(m.prototype,"direct",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(1,0,0)}}),I=i(m.prototype,"interval",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),O=i(m.prototype,"delay",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=i(m.prototype,"speed",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),L=i(m.prototype,"aiType",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"201"}}),P=m))||P));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});